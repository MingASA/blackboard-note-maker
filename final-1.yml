app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: test
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/siliconflow:0.0.15@775950e2071600bd3ba0415ec306c1b1582bc4a2a94688d642f627d112d87cd3
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1750561884076-source-1750649984503-target
      selected: false
      source: '1750561884076'
      sourceHandle: source
      target: '1750649984503'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: tool
      id: 1750649984503-true-1750649636709-target
      selected: false
      source: '1750649984503'
      sourceHandle: 'true'
      target: '1750649636709'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1750561884076-source-1750650044644-target
      selected: false
      source: '1750561884076'
      sourceHandle: source
      target: '1750650044644'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1750650044644-true-1750580906450-target
      selected: false
      source: '1750650044644'
      sourceHandle: 'true'
      target: '1750580906450'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1750561884076-source-1750650093620-target
      selected: false
      source: '1750561884076'
      sourceHandle: source
      target: '1750650093620'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: document-extractor
      id: 1750650093620-true-1750649025397-target
      selected: false
      source: '1750650093620'
      sourceHandle: 'true'
      target: '1750649025397'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: document-extractor
        targetType: llm
      id: 1750649025397-source-1750561944958-target
      selected: false
      source: '1750649025397'
      sourceHandle: source
      target: '1750561944958'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1750561944958-source-1750677970313-target
      selected: false
      source: '1750561944958'
      sourceHandle: source
      target: '1750677970313'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: variable-aggregator
      id: 1750649636709-source-1750678468427-target
      selected: false
      source: '1750649636709'
      sourceHandle: source
      target: '1750678468427'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1750580906450-source-1750678460708-target
      selected: false
      source: '1750580906450'
      sourceHandle: source
      target: '1750678460708'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: llm
      id: 1750677970313-source-17506546862890-target
      selected: false
      source: '1750677970313'
      sourceHandle: source
      target: '17506546862890'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: llm
      id: 1750678460708-source-17506546862890-target
      selected: false
      source: '1750678460708'
      sourceHandle: source
      target: '17506546862890'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: llm
      id: 1750678468427-source-17506546862890-target
      selected: false
      source: '1750678468427'
      sourceHandle: source
      target: '17506546862890'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1750650093620-false-1750679724359-target
      selected: false
      source: '1750650093620'
      sourceHandle: 'false'
      target: '1750679724359'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: variable-aggregator
      id: 1750679724359-source-1750677970313-target
      selected: false
      source: '1750679724359'
      sourceHandle: source
      target: '1750677970313'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1750649984503-false-17506798315160-target
      selected: false
      source: '1750649984503'
      sourceHandle: 'false'
      target: '17506798315160'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: variable-aggregator
      id: 17506798315160-source-1750678468427-target
      selected: false
      source: '17506798315160'
      sourceHandle: source
      target: '1750678468427'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1750650044644-false-17506798213160-target
      selected: false
      source: '1750650044644'
      sourceHandle: 'false'
      target: '17506798213160'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: variable-aggregator
      id: 17506798213160-source-1750678460708-target
      selected: false
      source: '17506798213160'
      sourceHandle: source
      target: '1750678460708'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: document-extractor
      id: 1750976307834-true-17509763605630-target
      selected: false
      source: '1750976307834'
      sourceHandle: 'true'
      target: '17509763605630'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 17506546862890-source-1750976307834-target
      selected: false
      source: '17506546862890'
      sourceHandle: source
      target: '1750976307834'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: document-extractor
        targetType: llm
      id: 17509763605630-source-1750976990135-target
      selected: false
      source: '17509763605630'
      sourceHandle: source
      target: '1750976990135'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        sourceType: loop-start
        targetType: code
      id: 1750991667280start-source-1750991692275-target
      selected: false
      source: 1750991667280start
      sourceHandle: source
      target: '1750991692275'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        sourceType: code
        targetType: assigner
      id: 1750991692275-source-1750991845881-target
      selected: false
      source: '1750991692275'
      sourceHandle: source
      target: '1750991845881'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        sourceType: assigner
        targetType: if-else
      id: 1750991845881-source-1750991901653-target
      selected: false
      source: '1750991845881'
      sourceHandle: source
      target: '1750991901653'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        sourceType: if-else
        targetType: loop-end
      id: 1750991901653-true-1750991932811-target
      selected: false
      source: '1750991901653'
      sourceHandle: 'true'
      target: '1750991932811'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: loop
        targetType: end
      id: 1750991667280-source-1750992145989-target
      selected: false
      source: '1750991667280'
      sourceHandle: source
      target: '1750992145989'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1750976990135-source-1750994093036-target
      selected: false
      source: '1750976990135'
      sourceHandle: source
      target: '1750994093036'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1750976307834-false-1750994342491-target
      selected: false
      source: '1750976307834'
      sourceHandle: 'false'
      target: '1750994342491'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: variable-aggregator
      id: 1750994342491-source-1750994093036-target
      selected: false
      source: '1750994342491'
      sourceHandle: source
      target: '1750994093036'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: loop
      id: 1750994093036-source-1750991667280-target
      selected: false
      source: '1750994093036'
      sourceHandle: source
      target: '1750991667280'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        sourceType: if-else
        targetType: code
      id: 1750991901653-false-1751001387624-target
      source: '1750991901653'
      sourceHandle: 'false'
      target: '1751001387624'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        sourceType: code
        targetType: assigner
      id: 1751001387624-source-1750992105795-target
      source: '1751001387624'
      sourceHandle: source
      target: '1750992105795'
      targetHandle: target
      type: custom
      zIndex: 1002
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - image
          allowed_file_upload_methods:
          - local_file
          - remote_url
          hide: false
          label: ç¬”è®°ç”Ÿæˆè¦æ±‚
          max_length: 1000000
          options: []
          required: false
          type: paragraph
          variable: userinput
        - allowed_file_extensions: []
          allowed_file_types:
          - image
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: å›¾ç‰‡é›†
          max_length: 10
          options: []
          required: false
          type: file-list
          variable: input_photo
        - allowed_file_extensions: []
          allowed_file_types:
          - audio
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: éŸ³é¢‘
          max_length: 10
          options: []
          required: false
          type: file-list
          variable: input_audio
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: æ–‡æ¡£
          max_length: 10
          options: []
          required: false
          type: file-list
          variable: input_doc
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: éœ€è¦æ•´åˆçš„ç¬”è®°
          max_length: 48
          options: []
          required: false
          type: file
          variable: input_before
      height: 193
      id: '1750561884076'
      position:
        x: -1049.2949974729436
        y: 128.67978884109328
      positionAbsolute:
        x: -1049.2949974729436
        y: 128.67978884109328
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        default_value:
        - key: text
          type: string
          value: è¾“å‡ºå¼‚å¸¸ï¼Œè¯·é‡è¯•ã€‚
        desc: ''
        error_strategy: default-value
        model:
          completion_params: {}
          mode: chat
          name: Pro/deepseek-ai/DeepSeek-V3
          provider: langgenius/siliconflow/siliconflow
        prompt_template:
        - edition_type: basic
          id: 366e8e31-55cd-47ee-9be5-34d2b68a12a7
          role: system
          text: 'è¯·å°†ä»¥ä¸‹æ–‡æœ¬åˆ—è¡¨ç›´æ¥åˆå¹¶ä¸ºä¸€ä¸ªè¿ç»­æ–‡æœ¬ï¼Œç”¨æ¢è¡Œç¬¦åˆ†éš”å„ä¸ªåŸåˆ—è¡¨é¡¹ï¼š


            {{#1750649025397.text#}}


            å¤„ç†è¦æ±‚ï¼š

            1. ä¸¥æ ¼ä¿æŒåŸåˆ—è¡¨é¡¹çš„å…ˆåé¡ºåº

            2. æ¯ä¸ªåŸåˆ—è¡¨é¡¹ä¹‹é—´ç”¨æ¢è¡Œç¬¦\nåˆ†éš”

            3. ä¸ä¿®æ”¹åŸåˆ—è¡¨é¡¹çš„ä»»ä½•å†…å®¹

            4. ä¸æ·»åŠ ä»»ä½•é¢å¤–åˆ†ææˆ–è¯´æ˜'
        retry_config:
          max_retries: 1
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output_enabled: false
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 155
      id: '1750561944958'
      position:
        x: 170.47380612320393
        y: -317.4354713497746
      positionAbsolute:
        x: 170.47380612320393
        y: -317.4354713497746
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        default_value:
        - key: text
          type: string
          value: æ— æ³•æ­£å¸¸è¯†åˆ«å›¾ç‰‡ï¼Œè¯·ä¸Šä¼ æ›´ä¸ºæ¸…æ™°çš„å›¾ç‰‡æˆ–æ£€æŸ¥å…¶ä»–é”™è¯¯ã€‚
        desc: ''
        error_strategy: default-value
        model:
          completion_params: {}
          mode: chat
          name: Qwen/Qwen2.5-VL-72B-Instruct
          provider: langgenius/siliconflow/siliconflow
        prompt_template:
        - id: f7f9afd5-456a-4be4-9fbb-bf3194766af5
          role: system
          text: 'è¯·åˆ†ææä¾›çš„å›¾ç‰‡ï¼Œè¯†åˆ«å…¶ä¸­æ‰€æœ‰çš„æ–‡å­—å†…å®¹ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬åœ¨å›¾ç‰‡ä¸­å‡ºç°çš„é¡ºåºè¿›è¡Œæ’åˆ—è¾“å‡ºã€‚


            è¦æ±‚å¦‚ä¸‹ï¼š

            ä¿ç•™åŸå§‹æ–‡å­—å†…å®¹ï¼Œä¸è¦è¿›è¡Œæ”¹å†™æˆ–ç¿»è¯‘ï¼›

            æ ‡æ³¨æ¯æ®µæ–‡å­—çš„å¤§è‡´ä½ç½®ï¼ˆä¾‹å¦‚â€œé¡¶éƒ¨æ ‡é¢˜â€ã€â€œå·¦ä¾§è¯´æ˜â€ã€â€œå³ä¸‹è§’å¤‡æ³¨â€ç­‰ï¼‰ï¼Œä»¥ä¾¿ä½“ç°é¡ºåºå’Œæ’ç‰ˆç»“æ„ï¼›

            å¦‚æœå›¾ç‰‡ä¸­åŒ…å«å¤šåˆ—ã€å¤šæ®µæˆ–è¡¨æ ¼ç»“æ„ï¼Œè¯·å°½é‡æŒ‰ç…§é˜…è¯»é¡ºåºç»„ç»‡è¾“å‡ºå†…å®¹ï¼›

            ä¸è¦é—æ¼ä»»ä½•å¯è§çš„æ–‡å­—å†…å®¹ï¼ŒåŒ…æ‹¬å°å­—ã€æ°´å°ã€ç¬¦å·ç­‰ã€‚

            è¾“å‡ºæ ¼å¼å¦‚ä¸‹ï¼š

            [ä½ç½®æè¿°]ï¼šæ–‡å­—å†…å®¹

            [ä½ç½®æè¿°]ï¼šæ–‡å­—å†…å®¹

            ...

            è¯·å°½å¯èƒ½è¯¦ç»†ã€å‡†ç¡®åœ°å®Œæˆæå–ã€‚'
        retry_config:
          max_retries: '3'
          retry_enabled: true
          retry_interval: '2000'
        selected: false
        title: LLM-photo
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - '1750561884076'
            - input_photo
          enabled: true
      height: 155
      id: '1750580906450'
      position:
        x: -106.97101258599324
        y: 38.945416362569915
      positionAbsolute:
        x: -106.97101258599324
        y: 38.945416362569915
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_array_file: true
        selected: false
        title: æ–‡æ¡£æå–å™¨
        type: document-extractor
        variable_selector:
        - '1750561884076'
        - input_doc
      height: 91
      id: '1750649025397'
      position:
        x: -241.11192872216319
        y: -405.84250137155846
      positionAbsolute:
        x: -241.11192872216319
        y: -405.84250137155846
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The audio file to be converted.
            ja_JP: The audio file to be converted.
            pt_BR: The audio file to be converted.
            zh_Hans: è¦è½¬æ¢çš„éŸ³é¢‘æ–‡ä»¶ã€‚
          label:
            en_US: Audio File
            ja_JP: Audio File
            pt_BR: Audio File
            zh_Hans: éŸ³é¢‘æ–‡ä»¶
          llm_description: The audio file to be converted.
          max: null
          min: null
          name: audio_file
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: file
        - auto_generate: null
          default: null
          form: form
          human_description:
            en_US: All available ASR models. You can config model in the Model Provider
              of Settings.
            ja_JP: All available ASR models. You can config model in the Model Provider
              of Settings.
            pt_BR: All available ASR models. You can config model in the Model Provider
              of Settings.
            zh_Hans: æ‰€æœ‰å¯ç”¨çš„ ASR æ¨¡å‹ã€‚ä½ å¯ä»¥åœ¨è®¾ç½®ä¸­çš„æ¨¡å‹ä¾›åº”å•†é‡Œé…ç½®ã€‚
          label:
            en_US: Model
            ja_JP: Model
            pt_BR: Model
            zh_Hans: Model
          llm_description: null
          max: null
          min: null
          name: model
          options:
          - label:
              en_US: FunAudioLLM/SenseVoiceSmall(langgenius/siliconflow/siliconflow)
              ja_JP: FunAudioLLM/SenseVoiceSmall(langgenius/siliconflow/siliconflow)
              pt_BR: FunAudioLLM/SenseVoiceSmall(langgenius/siliconflow/siliconflow)
              zh_Hans: FunAudioLLM/SenseVoiceSmall(langgenius/siliconflow/siliconflow)
            value: langgenius/siliconflow/siliconflow#FunAudioLLM/SenseVoiceSmall
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: select
        params:
          audio_file: ''
          model: ''
        provider_id: audio
        provider_name: audio
        provider_type: builtin
        selected: false
        title: Speech To Text
        tool_configurations:
          model: langgenius/siliconflow/siliconflow#FunAudioLLM/SenseVoiceSmall
        tool_description: å°†éŸ³é¢‘æ–‡ä»¶è½¬æ¢ä¸ºæ–‡æœ¬ã€‚
        tool_label: Speech To Text
        tool_name: asr
        tool_parameters:
          audio_file:
            type: variable
            value:
            - '1750561884076'
            - input_audio
        type: tool
      height: 89
      id: '1750649636709'
      position:
        x: -230.68554065311935
        y: 331.80537461197616
      positionAbsolute:
        x: -230.68554065311935
        y: 331.80537461197616
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 97789d41-858a-4805-a35f-cea23cc95f51
            sub_variable_condition:
              case_id: 6687296c-709f-4413-99bb-f58ac85bf4ff
              conditions: []
              logical_operator: and
            value: ''
            varType: array[file]
            variable_selector:
            - '1750561884076'
            - input_audio
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯
        type: if-else
      height: 125
      id: '1750649984503'
      position:
        x: -559.2653247354633
        y: 423.90513588852957
      positionAbsolute:
        x: -559.2653247354633
        y: 423.90513588852957
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 762a6b6a-ca17-493a-be2e-ae6aae601de2
            sub_variable_condition:
              case_id: 1e8e14c4-b826-42f2-83af-3f401005b585
              conditions: []
              logical_operator: and
            value: ''
            varType: array[file]
            variable_selector:
            - '1750561884076'
            - input_photo
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯ 2
        type: if-else
      height: 125
      id: '1750650044644'
      position:
        x: -559.2653247354633
        y: 128.67978884109328
      positionAbsolute:
        x: -559.2653247354633
        y: 128.67978884109328
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 044be4ff-6668-46a4-a21f-87b5b64c5e68
            value: ''
            varType: array[file]
            variable_selector:
            - '1750561884076'
            - input_doc
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯ 3
        type: if-else
      height: 125
      id: '1750650093620'
      position:
        x: -559.2653247354633
        y: -112.16173846315222
      positionAbsolute:
        x: -559.2653247354633
        y: -112.16173846315222
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        default_value:
        - key: text
          type: string
          value: è¾“å‡ºå¼‚å¸¸ï¼Œè¯·é‡è¯•ã€‚
        desc: ''
        error_strategy: default-value
        model:
          completion_params: {}
          mode: chat
          name: Pro/deepseek-ai/DeepSeek-V3
          provider: langgenius/siliconflow/siliconflow
        prompt_template:
        - edition_type: basic
          id: 366e8e31-55cd-47ee-9be5-34d2b68a12a7
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¬”è®°æ•´ç†åŠ©æ‰‹ï¼Œè´Ÿè´£å°†è¯¾å ‚æ¿ä¹¦ï¼ˆæ–‡å­—ç‰ˆï¼‰è½¬æ¢ä¸ºç»“æ„æ¸…æ™°ã€æ˜“äºç†è§£çš„ç¬”è®°ã€‚è¯·ä»¥ {{#1750561884076.userinput#}}\
            \ ä¸ºè¦æ±‚ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸ŠæŒ‰ä¸‹åˆ—è¦æ±‚å¤„ç†è¾“å…¥çš„æ–‡æœ¬å†…å®¹ï¼š\n## è¾“å…¥\nè¾“å…¥**å¯èƒ½**æœ‰ä¸‰éƒ¨åˆ†ï¼Œä½ éœ€è¦å°†ä¸‰éƒ¨åˆ†æ•´åˆï¼Œåˆå¹¶æ•´ç†å…¶ä¸­ç›¸ä¼¼éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¿ç•™ä¸åŒéƒ¨åˆ†ã€‚ï¼ˆæ³¨æ„ï¼šå¦‚æœæŸä¸ªè¾“å…¥ä¸ºç©ºï¼Œè¯·ä½ å¿½ç•¥ï¼‰\n\
            è¾“å…¥1ï¼š{{#1750677970313.output#}}\nè¾“å…¥2ï¼š{{#1750678460708.output#}}\nè¾“å…¥3ï¼š{{#1750678468427.output#}}\n\
            ## è¾“å‡ºè¦æ±‚\n- é€»è¾‘åˆ†æ®µï¼šæ ¹æ®å†…å®¹ä¸»é¢˜è‡ªç„¶åˆ’åˆ†æ®µè½ï¼Œç¡®ä¿æ¯æ®µåªè®¨è®ºä¸€ä¸ªæ ¸å¿ƒç‚¹ã€‚\n- å°†ç»“æœä¸­æ‰€æœ‰ \\[ å’Œ \\] æ›¿æ¢ä¸º $$ã€‚\n\
            - é‡ç‚¹æ ‡æ³¨ï¼š\nä½¿ç”¨Â åŠ ç²—Â æˆ–Â é«˜äº®Â æ ‡è®°å…³é”®æœ¯è¯­ã€å®šä¹‰ã€å…¬å¼ã€‚\nç”¨Â >Â å¼•ç”¨æ•™å¸ˆå¼ºè°ƒçš„æ³¨æ„äº‹é¡¹æˆ–ä¾‹å­ã€‚\n- ç»“æ„åŒ–æ’ç‰ˆï¼š\n - æ ‡é¢˜åˆ†çº§ï¼ˆå¦‚Â ##\
            \ 1. ä¸»é¢˜ã€### 1.1 å­ä¸»é¢˜ï¼‰ã€‚\n - åˆ—è¡¨é¡¹ç”¨Â -Â æˆ–æ•°å­—åºå·æ’åˆ—ã€‚\n- è¡¥å……è¯´æ˜ï¼ˆå¯é€‰ï¼‰ï¼š\nå¯¹å¤æ‚æ¦‚å¿µæ·»åŠ ç®€çŸ­çš„æ³¨é‡Šï¼ˆæ ¼å¼ï¼šæ³¨ï¼š...ï¼‰ã€‚\n\
            ç”¨è¡¨æ ¼å¯¹æ¯”å…³è”å†…å®¹ï¼ˆå¦‚åˆ†ç±»ã€ä¼˜ç¼ºç‚¹ï¼‰ã€‚\n\n## ç¤ºä¾‹è¾“å‡ºæ¨¡æ¿\n```markdown\n### 1. ä¸»é¢˜åç§°  \n- **æ ¸å¿ƒæ¦‚å¿µ**ï¼šå®šä¹‰æˆ–è§£é‡Šã€‚\
            \  \n> æ•™å¸ˆç¤ºä¾‹ï¼šå…·ä½“æ¡ˆä¾‹æˆ–åº”ç”¨åœºæ™¯ã€‚  \n\n#### 1.1 å­ä¸»é¢˜  \n- è¦ç‚¹1ï¼šè¯´æ˜ã€‚  \n- è¦ç‚¹2ï¼šè¯´æ˜ã€‚  \n\
            æ³¨ï¼šæ­¤å¤„è¡¥å……èƒŒæ™¯çŸ¥è¯†æˆ–å¸¸è§è¯¯åŒºã€‚  \n\n### 2. å¯¹æ¯”åˆ†æ  \n| ç±»å‹ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |  \n|------|------|----------|\
            \  \n| A    | ...  | ...      |  \n```\n\næ³¨æ„ï¼šä¿æŒå†…å®¹ç®€æ´ï¼Œé¿å…å†—ä½™ï¼Œä¼˜å…ˆä¿ç•™æ•™å¸ˆåŸæ„ï¼"
        - id: 727551aa-62e6-4609-a0a1-e47cc22f3edd
          role: user
          text: ''
        retry_config:
          max_retries: '3'
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output_enabled: false
        title: LLM2
        type: llm
        variables: []
        vision:
          enabled: false
      height: 155
      id: '17506546862890'
      position:
        x: 1136.6459986410493
        y: 181.70650087432995
      positionAbsolute:
        x: 1136.6459986410493
        y: 181.70650087432995
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: å˜é‡èšåˆå™¨
        type: variable-aggregator
        variables:
        - - '1750561944958'
          - text
        - - '1750679724359'
          - result
      height: 130
      id: '1750677970313'
      position:
        x: 838.9290088846527
        y: -112.16173846315222
      positionAbsolute:
        x: 838.9290088846527
        y: -112.16173846315222
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: å˜é‡èšåˆå™¨ 2
        type: variable-aggregator
        variables:
        - - '1750580906450'
          - text
        - - '17506798213160'
          - result
      height: 130
      id: '1750678460708'
      position:
        x: 526.7376409115342
        y: 138.48437424419487
      positionAbsolute:
        x: 526.7376409115342
        y: 138.48437424419487
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: å˜é‡èšåˆå™¨ 3
        type: variable-aggregator
        variables:
        - - '17506546870550'
          - text
        - - '17506798315160'
          - result
      height: 130
      id: '1750678468427'
      position:
        x: 709.6645347164363
        y: 410.6310595202599
      positionAbsolute:
        x: 709.6645347164363
        y: 410.6310595202599
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main() -> dict:\r\n    return {\r\n        \"result\": \"ï¼ˆå†…å®¹å¯èƒ½ä¸ºç©ºï¼‰\"\
          ,\r\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ
        type: code
        variables: []
      height: 53
      id: '1750679724359'
      position:
        x: 131.99761282562474
        y: -112.16173846315222
      positionAbsolute:
        x: 131.99761282562474
        y: -112.16173846315222
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main() -> dict:\r\n    return {\r\n        \"result\": \"ï¼ˆå†…å®¹å¯èƒ½ä¸ºç©ºï¼‰\"\
          ,\r\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ (1)
        type: code
        variables: []
      height: 53
      id: '17506798213160'
      position:
        x: 143.78119570583442
        y: 235.92224776545208
      positionAbsolute:
        x: 143.78119570583442
        y: 235.92224776545208
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main() -> dict:\r\n    return {\r\n        \"result\": \"ï¼ˆå†…å®¹å¯èƒ½ä¸ºç©ºï¼‰\"\
          ,\r\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ (1)
        type: code
        variables: []
      height: 53
      id: '17506798315160'
      position:
        x: 63.603696647092306
        y: 499.1464899583036
      positionAbsolute:
        x: 63.603696647092306
        y: 499.1464899583036
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: exists
            id: dccaf0af-3cc0-411d-9634-f879f02161b1
            value: ''
            varType: file
            variable_selector:
            - '1750561884076'
            - input_before
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯ 4
        type: if-else
      height: 125
      id: '1750976307834'
      position:
        x: 1525.0295377896214
        y: 181.70650087432995
      positionAbsolute:
        x: 1525.0295377896214
        y: 181.70650087432995
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_array_file: false
        selected: false
        title: æ–‡æ¡£æå–å™¨ (1)
        type: document-extractor
        variable_selector:
        - '1750561884076'
        - input_before
      height: 91
      id: '17509763605630'
      position:
        x: 1776.927627647915
        y: 71.78385718157821
      positionAbsolute:
        x: 1776.927627647915
        y: 71.78385718157821
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: Pro/deepseek-ai/DeepSeek-V3
          provider: langgenius/siliconflow/siliconflow
        prompt_template:
        - id: 268ce252-a654-4d5d-bbbc-3b95d75b0faa
          role: system
          text: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¬”è®°æ•´ç†åŠ©æ‰‹ï¼Œè´Ÿè´£å°†æ¯æ¬¡æ–°ä¸Šè¯¾è®°çš„ç¬”è®°æ•´åˆåˆ°åŸæœ‰çš„ç¬”è®°å½“ä¸­ï¼Œè¯·æŒ‰ä¸‹åˆ—è¦æ±‚å¤„ç†è¾“å…¥çš„æ–‡æœ¬å†…å®¹ï¼š

            ## è¾“å…¥

            æ–°ç¬”è®°ï¼š{{#17506546862890.text#}}

            åŸæœ‰ç¬”è®°ï¼š{{#17509763605630.text#}}

            ## è¾“å‡ºè¦æ±‚

            - è¯·å°†æ–°ç¬”è®°æ•´åˆåˆ°åŸæœ‰ç¬”è®°ä¸­ï¼Œéœ€ä¸¥æ ¼ä¿ç•™åŸæœ‰ç¬”è®°å’Œæ–°ç¬”è®°çš„æ ¸å¿ƒå†…å®¹ä¸è¡¨è¿°ï¼Œä»…æ·»åŠ å¿…è¦çš„ç¼–å·å’Œç›®å½•ï¼Œä¸åšå…¶ä»–å†…å®¹æ”¹åŠ¨ã€‚â€‹

            - ä¸ºæ‰€æœ‰çŸ¥è¯†ç‚¹è¿›è¡Œç‹¬ç«‹ç¼–å·ï¼Œç¼–å·æ ¼å¼é‡‡ç”¨ â€œ1.ã€1.1ã€1.1.1â€ è¿™æ ·çš„å±‚çº§ç»“æ„ï¼Œç¡®ä¿æ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½æœ‰å”¯ä¸€ç¼–å·ï¼Œé€»è¾‘æ¸…æ™°ã€‚â€‹

            - åœ¨ç¬”è®°å¼€å¤´ç”Ÿæˆè‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼Œç›®å½•éœ€åŒ…å«æ‰€æœ‰çŸ¥è¯†ç‚¹ç¼–å·åŠå¯¹åº”æ ‡é¢˜ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½ã€‚â€‹

            - æ•´åˆæ—¶ï¼Œå°†æ–°ç¬”è®°å†…å®¹åˆç†æ’å…¥åˆ°åŸæœ‰ç¬”è®°å¯¹åº”æˆ–ç›¸å…³çš„çŸ¥è¯†ç‚¹éƒ¨åˆ†ï¼Œè‹¥æ²¡æœ‰å¯¹åº”çŸ¥è¯†ç‚¹ï¼Œåˆ™åœ¨åˆé€‚ä½ç½®æ–°å¢çŸ¥è¯†ç‚¹è¿›è¡Œæ’å…¥ã€‚'
        selected: false
        title: LLM 4
        type: llm
        variables: []
        vision:
          enabled: false
      height: 89
      id: '1750976990135'
      position:
        x: 2065.1047393040735
        y: 71.78385718157821
      positionAbsolute:
        x: 2065.1047393040735
        y: 71.78385718157821
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        break_conditions:
        - comparison_operator: is
          id: b7f53100-c9af-434b-a0ac-5d79d2aa75c0
          value: æ˜¯
          varType: string
          variable_selector:
          - '1750991667280'
          - pure_markdown
        desc: ''
        error_handle_mode: terminated
        height: 401
        logical_operator: and
        loop_count: 3
        loop_variables:
        - id: 901e8328-c6ab-4631-afa0-7c88cc7394f3
          label: pure_markdown
          value:
          - '1750994093036'
          - output
          value_type: variable
          var_type: string
        - id: 74c1a513-8a86-4c12-9da7-d737ab95ce65
          label: cur_text
          value:
          - '1750994093036'
          - output
          value_type: variable
          var_type: string
        selected: false
        start_node_id: 1750991667280start
        title: å¾ªç¯
        type: loop
        width: 980.9392149142641
      height: 401
      id: '1750991667280'
      position:
        x: 2653.278538966464
        y: 181.70650087432995
      positionAbsolute:
        x: 2653.278538966464
        y: 181.70650087432995
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 981
      zIndex: 1
    - data:
        desc: ''
        isInLoop: true
        selected: false
        title: ''
        type: loop-start
      draggable: false
      height: 48
      id: 1750991667280start
      parentId: '1750991667280'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 2677.278538966464
        y: 249.70650087432995
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-loop-start
      width: 44
      zIndex: 1002
    - data:
        code: "def markdown_validator(text: str) -> bool:\n    \"\"\"\n    ä¸¥æ ¼éªŒè¯Markdownè¯­æ³•åˆè§„æ€§\n\
          \    è¿”å›Trueè¡¨ç¤ºå®Œå…¨åˆè§„ï¼ŒFalseè¡¨ç¤ºå­˜åœ¨è¯­æ³•é”™è¯¯\n    \n    éªŒè¯è§„åˆ™:\n    1. å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªä¸€çº§æ ‡é¢˜\n\
          \    2. åˆ—è¡¨å¿…é¡»æ­£ç¡®åµŒå¥—å’Œç¼©è¿›\n    3. é“¾æ¥å’Œå›¾ç‰‡è¯­æ³•å¿…é¡»å®Œæ•´\n    4. ä»£ç å—å¿…é¡»æˆå¯¹å‡ºç°\n    5. é«˜çº§è¯­æ³•(ä¸Šæ ‡ã€ä¸‹æ ‡ã€è¡¨æ ¼ã€å¼•ç”¨)å¿…é¡»ç¬¦åˆè§„èŒƒ\n\
          \    6. æ®µè½ä¹‹é—´å¿…é¡»æœ‰ç©ºè¡Œåˆ†éš”\n    \"\"\"\n    import re\n    \n    # ç©ºæ–‡æ¡£æ£€æŸ¥\n    if\
          \ not text.strip():\n        return False\n    \n    # åŸºç¡€ç»“æ„éªŒè¯ (å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªä¸€çº§æ ‡é¢˜)\n\
          \    if not re.search(r'^#\\s+.+$', text, re.MULTILINE):\n        return\
          \ False\n    \n    # æ®µè½åˆ†éš”éªŒè¯ (æ®µè½ä¹‹é—´å¿…é¡»æœ‰ç©ºè¡Œ)\n    lines = text.split('\\n')\n\
          \    in_paragraph = False\n    for i, line in enumerate(lines):\n      \
          \  if line.strip() and not re.match(r'^\\s*(#|>|\\d+\\.|[-*+]|```|\\|)',\
          \ line):\n            if in_paragraph and i > 0 and lines[i-1].strip() ==\
          \ '':\n                return False  # æ®µè½ä¹‹é—´ç¼ºå°‘ç©ºè¡Œ\n            in_paragraph\
          \ = True\n        else:\n            in_paragraph = False\n    \n    # åˆ—è¡¨æ ¼å¼éªŒè¯\
          \ (æœ‰åº/æ— åºåˆ—è¡¨éœ€æ­£ç¡®åµŒå¥—)\n    list_pattern = r'^(\\s*[-*+]|\\s*\\d+\\.)\\s+\\S+'\n\
          \    if re.search(list_pattern, text, re.MULTILINE):\n        lines = text.split('\\\
          n')\n        list_stack = []\n        \n        for line in lines:\n   \
          \         list_match = re.match(list_pattern, line)\n            if list_match:\n\
          \                current_indent = len(re.match(r'\\s*', line).group(0))\n\
          \                # æ£€æŸ¥ç¼©è¿›æ˜¯å¦åŒ¹é…å½“å‰åˆ—è¡¨å±‚çº§\n                if list_stack:\n    \
          \                if current_indent > list_stack[-1] + 4:\n             \
          \           return False\n                    elif current_indent < list_stack[-1]:\n\
          \                        # ç¼©è¿›å‡å°‘å¿…é¡»åŒ¹é…ä¹‹å‰çš„å±‚çº§\n                        if current_indent\
          \ not in list_stack:\n                            return False\n       \
          \         list_stack.append(current_indent)\n            elif line.strip()\
          \ and list_stack:\n                # åˆ—è¡¨ä¸­é—´å‡ºç°å…¶ä»–å†…å®¹éœ€ç©ºè¡Œåˆ†éš”\n                if\
          \ not re.match(r'^\\s*$', line):\n                    return False\n   \
          \             list_stack = []\n    \n    # é“¾æ¥è¯­æ³•éªŒè¯\n    if '](' in text:\n\
          \        for match in re.finditer(r'\\[.*?\\]\\(.*?\\)', text):\n      \
          \      link_text, link_url = match.group(0).split('](', 1)\n           \
          \ if not link_text.startswith('[') or not link_url.endswith(')'):\n    \
          \            return False\n            if len(link_text) < 2 or len(link_url)\
          \ < 2:  # ç©ºå†…å®¹æ£€æŸ¥\n                return False\n    \n    # å›¾ç‰‡è¯­æ³•éªŒè¯\n    if\
          \ '![' in text:\n        for match in re.finditer(r'!\\[.*?\\]\\(.*?\\)',\
          \ text):\n            alt_text, img_url = match.group(0).split('](', 1)\n\
          \            if not alt_text.startswith('![') or not img_url.endswith(')'):\n\
          \                return False\n            if len(alt_text) < 3 or len(img_url)\
          \ < 2:  # ç©ºå†…å®¹æ£€æŸ¥\n                return False\n    \n    # ä»£ç å—é—­åˆéªŒè¯\n   \
          \ if '```' in text:\n        code_blocks = re.findall(r'```', text)\n  \
          \      if len(code_blocks) % 2 != 0:\n            return False\n       \
          \ # æ£€æŸ¥ä»£ç å—è¯­è¨€å£°æ˜\n        for match in re.finditer(r'^```[a-zA-Z0-9]*$', text,\
          \ re.MULTILINE):\n            if not re.search(r'^```[a-zA-Z0-9]+\\s*$',\
          \ match.group(0)):\n                return False\n    \n    # é«˜çº§è¯­æ³•éªŒè¯\n \
          \   if '^' in text:\n        if not re.findall(r'\\^\\w+\\^', text):  #\
          \ ä¸Šæ ‡\n            return False\n    if '~' in text:\n        if not re.findall(r'~\\\
          w+~', text):    # ä¸‹æ ‡\n            return False\n    if '|' in text:\n  \
          \      # ç®€å•è¡¨æ ¼éªŒè¯\n        table_lines = [line for line in lines if '|' in\
          \ line and '--' in line]\n        if len(table_lines) > 1:\n           \
          \ if not re.search(r'^\\|[-:\\s]+\\|$', table_lines[1]):  # è¡¨å¤´åˆ†éš”çº¿\n    \
          \            return False\n    if '>' in text:\n        # å¼•ç”¨å—éªŒè¯\n      \
          \  in_block = False\n        for line in lines:\n            if line.startswith('>'):\n\
          \                in_block = True\n            elif line.strip() and in_block:\n\
          \                if not line.startswith(' ') and not line.startswith('>'):\n\
          \                    return False\n    \n    # è½¬ä¹‰å­—ç¬¦éªŒè¯\n    if '\\\\' in\
          \ text:\n        for match in re.finditer(r'\\\\.', text):\n           \
          \ if match.group(0)[1] not in r'\\`*_{}[]()#+-.!|~^':\n                return\
          \ False\n    \n    # æœ€ç»ˆé€šè¿‡æ ¡éªŒ\n    return True\n\n\ndef main(params: dict\
          \ = None, **kwargs) -> dict:\n    \"\"\"\n    Dify æ ‡å‡†å…¥å£å‡½æ•°\n    è¾“å…¥: {\"text\"\
          : \"å¾…éªŒè¯å†…å®¹\"} æˆ–ç›´æ¥ä¼ é€’textå‚æ•°\n    è¾“å‡º: {\"result\": \"æ˜¯å¦æœ‰æ•ˆ\", \"debug_info\"\
          : {...}}\n    \"\"\"\n    # åˆå¹¶å‚æ•°\n    if params is None:\n        params\
          \ = kwargs\n    elif kwargs:\n        params.update(kwargs)\n    \n    text\
          \ = params.get(\"text\", \"\")\n    try:\n        is_valid = markdown_validator(text)\n\
          \        return {\n            \"result\": \"æ˜¯\" if is_valid else \"å¦\"\n\
          \        }\n        \n    except Exception as e:\n        return {\n   \
          \         \"result\": \"å¦\",\n        }\n\n\n# æ­£åˆ™è¡¨è¾¾å¼é¢„ç¼–è¯‘\nimport re"
        code_language: python3
        desc: æ£€æµ‹è¾“å‡ºæ˜¯å¦ä¸ºæ­£ç¡®markdownæ ¼å¼
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: éªŒè¯markdown
        type: code
        variables:
        - value_selector:
          - '1750991667280'
          - cur_text
          variable: text
      height: 81
      id: '1750991692275'
      parentId: '1750991667280'
      position:
        x: 119.10351600382728
        y: 66.31790116362066
      positionAbsolute:
        x: 2772.3820549702914
        y: 248.0244020379506
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: false
        isInLoop: true
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1750991692275'
          - result
          variable_selector:
          - '1750991667280'
          - pure_markdown
          write_mode: over-write
        loop_id: '1750991667280'
        selected: false
        title: å˜é‡èµ‹å€¼
        type: assigner
        version: '2'
      height: 87
      id: '1750991845881'
      parentId: '1750991667280'
      position:
        x: 424.421417167448
        y: 65
      positionAbsolute:
        x: 3077.699956133912
        y: 246.70650087432995
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: cea26978-6ced-4399-8813-85c986ead0cf
            value: æ˜¯
            varType: string
            variable_selector:
            - '1750991667280'
            - pure_markdown
          id: 'true'
          logical_operator: and
        desc: ''
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        selected: false
        title: æ¡ä»¶åˆ†æ”¯ 5
        type: if-else
      height: 125
      id: '1750991901653'
      parentId: '1750991667280'
      position:
        x: 116.42141716744845
        y: 198.99999999999977
      positionAbsolute:
        x: 2769.6999561339126
        y: 380.7065008743297
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        selected: false
        title: é€€å‡ºå¾ªç¯
        type: loop-end
      height: 53
      id: '1750991932811'
      parentId: '1750991667280'
      position:
        x: 420.42141716744845
        y: 198.99999999999977
      positionAbsolute:
        x: 3073.6999561339126
        y: 380.7065008743297
      sourcePosition: right
      targetPosition: left
      type: custom-simple
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: false
        isInLoop: true
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1751001387624'
          - result
          variable_selector:
          - '1750991667280'
          - cur_text
          write_mode: over-write
        loop_id: '1750991667280'
        selected: false
        title: å˜é‡èµ‹å€¼ 2
        type: assigner
        version: '2'
      height: 87
      id: '1750992105795'
      parentId: '1750991667280'
      position:
        x: 720.9392149142641
        y: 279.812292113854
      positionAbsolute:
        x: 3374.217753880728
        y: 461.518792988184
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1750991667280'
          - cur_text
          variable: cur_text
        selected: false
        title: ç»“æŸ
        type: end
      height: 89
      id: '1750992145989'
      position:
        x: 3675.1264265739496
        y: 181.70650087432995
      positionAbsolute:
        x: 3675.1264265739496
        y: 181.70650087432995
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: å˜é‡èšåˆå™¨ 4
        type: variable-aggregator
        variables:
        - - '1750976990135'
          - text
        - - '1750994342491'
          - result
      height: 130
      id: '1750994093036'
      position:
        x: 2333.994845252577
        y: 196.5538929115774
      positionAbsolute:
        x: 2333.994845252577
        y: 196.5538929115774
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(text: str) -> dict:\n    return {\n        \"result\": text\n\
          \    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ 5
        type: code
        variables:
        - value_selector:
          - '17506546862890'
          - text
          variable: text
      height: 53
      id: '1750994342491'
      position:
        x: 1930.6657740959654
        y: 262.443436400225
      positionAbsolute:
        x: 1930.6657740959654
        y: 262.443436400225
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def format_markdown(text: str) -> str:\n    \"\"\"\n    ä¿®æ”¹markdownæ–‡æœ¬æ ¼å¼ä½¿å…¶ç¬¦åˆéªŒè¯è§„åˆ™\n\
          \    \n    å¤„ç†æ­¥éª¤:\n    1. ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªä¸€çº§æ ‡é¢˜\n    2. ä¿®æ­£åˆ—è¡¨åµŒå¥—å’Œç¼©è¿›\n    3. ç¡®ä¿é“¾æ¥å’Œå›¾ç‰‡è¯­æ³•å®Œæ•´\n\
          \    4. ç¡®ä¿ä»£ç å—æˆå¯¹å‡ºç°\n    5. ä¿®æ­£é«˜çº§è¯­æ³•æ ¼å¼\n    6. ç¡®ä¿æ®µè½ä¹‹é—´æœ‰ç©ºè¡Œåˆ†éš”\n    \"\"\"\n   \
          \ lines = text.split('\\n')\n    result = []\n    last_line_was_blank =\
          \ True\n    \n    # 1. ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªä¸€çº§æ ‡é¢˜\n    has_h1 = any(line.startswith('#\
          \ ') for line in lines)\n    if not has_h1:\n        if lines and lines[0].strip():\n\
          \            result.append('# ' + lines[0].strip())\n            result.append('')\n\
          \            lines = lines[1:]\n        else:\n            result.append('#\
          \ æ–‡æ¡£æ ‡é¢˜')\n            result.append('')\n    \n    # å¤„ç†æ®µè½å’Œåˆ—è¡¨\n    in_list\
          \ = False\n    list_indent = 0\n    in_code_block = False\n    \n    for\
          \ i, line in enumerate(lines):\n        stripped = line.strip()\n      \
          \  \n        # å¤„ç†ä»£ç å—\n        if stripped.startswith('```'):\n         \
          \   in_code_block = not in_code_block\n            result.append(line)\n\
          \            last_line_was_blank = False\n            continue\n       \
          \ \n        if in_code_block:\n            result.append(line)\n       \
          \     continue\n        \n        # ç©ºè¡Œå¤„ç†\n        if not stripped:\n   \
          \         if not last_line_was_blank:\n                result.append('')\n\
          \                last_line_was_blank = True\n            in_list = False\n\
          \            continue\n        \n        # åˆ—è¡¨å¤„ç†\n        list_match = re.match(r'^(\\\
          s*)([-*+]|\\d+\\.)\\s+', line)\n        if list_match:\n            current_indent\
          \ = len(list_match.group(1))\n            if in_list and current_indent\
          \ > list_indent + 4:\n                # ä¿®æ­£è¿‡å¤§çš„ç¼©è¿›\n                line =\
          \ ' ' * (list_indent + 4) + line.lstrip()\n            elif in_list and\
          \ current_indent < list_indent:\n                # ç¡®ä¿ç¼©è¿›å¯¹é½\n            \
          \    line = ' ' * list_indent + line.lstrip()\n            \n          \
          \  list_indent = len(re.match(r'^\\s*', line).group(0))\n            in_list\
          \ = True\n        else:\n            in_list = False\n        \n       \
          \ # ç¡®ä¿æ®µè½ä¹‹é—´æœ‰ç©ºç™½è¡Œ\n        is_paragraph = (stripped and \n                \
          \       not re.match(r'^\\s*(#|>|\\d+\\.|[-*+]|```|\\|)', line) and\n  \
          \                     not last_line_was_blank)\n        \n        if is_paragraph:\n\
          \            result.append('')\n        \n        # å¤„ç†é“¾æ¥å’Œå›¾ç‰‡\n        if\
          \ '](' in line:\n            line = re.sub(r'\\[(.*?)\\]\\((.*?)\\)', \n\
          \                         lambda m: f'[{m.group(1)}]({m.group(2)})' if m.group(1)\
          \ and m.group(2) else m.group(0),\n                         line)\n    \
          \    \n        if '![' in line:\n            line = re.sub(r'!\\[(.*?)\\\
          ]\\((.*?)\\)', \n                         lambda m: f'![{m.group(1)}]({m.group(2)})'\
          \ if m.group(1) and m.group(2) else m.group(0),\n                      \
          \   line)\n        \n        # å¤„ç†é«˜çº§è¯­æ³•\n        if '^' in line:\n       \
          \     line = re.sub(r'\\^(\\w+)\\^', r'^\\1^', line)\n        if '~' in\
          \ line:\n            line = re.sub(r'~(\\w+)~', r'~\\1~', line)\n      \
          \  \n        # å¤„ç†dollarç¬¦å·å’Œæ±‰å­—ä¹‹é—´çš„ç©ºæ ¼\n        if '$' in line:\n           \
          \ # åœ¨dollarç¬¦å·å‰é¢æ·»åŠ ç©ºæ ¼ï¼Œå¦‚æœå‰é¢æ˜¯æ±‰å­—çš„è¯\n            line = re.sub(r'([\\u4e00-\\\
          u9fff])\\$', r'\\1 $', line)\n            # åœ¨dollarç¬¦å·åé¢æ·»åŠ ç©ºæ ¼ï¼Œå¦‚æœåé¢æ˜¯æ±‰å­—çš„è¯\n\
          \            line = re.sub(r'\\$([\\u4e00-\\u9fff])', r'$ \\1', line)\n\
          \        \n        result.append(line)\n        last_line_was_blank = False\n\
          \    \n    # ç¡®ä¿ä»£ç å—é—­åˆ\n    code_blocks = re.findall(r'```', '\\n'.join(result))\n\
          \    if len(code_blocks) % 2 != 0:\n        result.append('```')\n    \n\
          \    # é‡æ–°ç»„åˆå¹¶è¿”å›\n    formatted_text = '\\n'.join(result)\n    \n    # æœ€ç»ˆæ¸…ç†å¤šä½™ç©ºè¡Œ\n\
          \    formatted_text = re.sub(r'\\n{3,}', '\\n\\n', formatted_text)\n   \
          \ \n    return formatted_text\n\n\ndef main(params: dict = None, **kwargs)\
          \ -> dict:\n    \"\"\"\n    Dify æ ‡å‡†å…¥å£å‡½æ•°\n    è¾“å…¥: {\"text\": \"å¾…éªŒè¯å†…å®¹\"} æˆ–ç›´æ¥ä¼ é€’textå‚æ•°\n\
          \    è¾“å‡º: {\"result\": \"æ ¼å¼åŒ–åçš„markdownæ–‡æœ¬\", \"is_valid\": bool}\n    \"\"\
          \"\n    # åˆå¹¶å‚æ•°\n    if params is None:\n        params = kwargs\n    elif\
          \ kwargs:\n        params.update(kwargs)\n    \n    text = params.get(\"\
          text\", \"\")\n    try:\n        formatted_text = format_markdown(text)\n\
          \        is_valid = markdown_validator(formatted_text)\n        \n     \
          \   return {\n            \"result\": formatted_text\n        }\n      \
          \  \n    except Exception as e:\n        return {\n            \"result\"\
          : text\n        }\n\n\n# æ­£åˆ™è¡¨è¾¾å¼é¢„ç¼–è¯‘\nimport re"
        code_language: python3
        desc: ''
        isInIteration: false
        isInLoop: true
        loop_id: '1750991667280'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ 6
        type: code
        variables:
        - value_selector:
          - '1750991667280'
          - cur_text
          variable: text
      height: 53
      id: '1751001387624'
      parentId: '1750991667280'
      position:
        x: 420.42141716744845
        y: 291.87055056329586
      positionAbsolute:
        x: 3073.6999561339126
        y: 473.5770514376258
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    viewport:
      x: 371.46437350483393
      y: 328.1919370742612
      zoom: 0.25
